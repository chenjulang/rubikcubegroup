这是错的：

a: {
      permute: Perm (Fin 8) := (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)
      orient : Vector (Fin 3) 8 := (b1,b2,b3,b4,b5,b6,b7,b8)
}
b: {
      permute: Perm (Fin 8) := (a1=>c1,a2=>c2,a3=>c3,a4=>c4,a5=>c5,a6=>c6,a7=>c7,a8=>c8)
      orient : Vector (Fin 3) 8 := (d1,d2,d3,d4,d5,d6,d7,d8)
}
c: {
      permute: Perm (Fin 8) := (c1=>e1,c2=>e2,c3=>e3,c4=>e4,c5=>e5,c6=>e6,c7=>e7,c8=>e8)
      orient : Vector (Fin 3) 8 := (f1,f2,f3,f4,f5,f6,f7,f8)
}
bc:{
      permute: (a1=>c1,a2=>c2,a3=>c3,a4=>c4,a5=>c5,a6=>c6,a7=>c7,a8=>c8) * (c1=>e1,c2=>e2,c3=>e3,c4=>e4,c5=>e5,c6=>e6,c7=>e7,c8=>e8)
            = (a1=>e1,a2=>e2,a3=>e3,a4=>e4,a5=>e5,a6=>e6,a7=>e7,a8=>e8)
      orient : (a1=>c1,a2=>c2,a3=>c3,a4=>c4,a5=>c5,a6=>c6,a7=>c7,a8=>c8)^(-1)·(f1,f2,f3,f4,f5,f6,f7,f8)
            + (d1,d2,d3,d4,d5,d6,d7,d8) (mod 3)
      }
ab:{
      permute: (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1) * (a1=>c1,a2=>c2,a3=>c3,a4=>c4,a5=>c5,a6=>c6,a7=>c7,a8=>c8)
            = (1=>c1,2=>c1,3=>c1,4=>c1,5=>c1,6=>c1,7=>c1,8=>c1)
      orient : (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
            + (b1,b2,b3,b4,b5,b6,b7,b8) (mod 3)
      }
(ab)c:{
      permute: (1=>c1,2=>c1,3=>c1,4=>c1,5=>c1,6=>c1,7=>c1,8=>c1)
            * (c1=>e1,c2=>e2,c3=>e3,c4=>e4,c5=>e5,c6=>e6,c7=>e7,c8=>e8)
            = (1=>e1,2=>e1,3=>e1,4=>e1,5=>e1,6=>e1,7=>e1,8=>e1)
      orient : (1=>c1,2=>c1,3=>c1,4=>c1,5=>c1,6=>c1,7=>c1,8=>c1)^(-1)·
            (f1,f2,f3,f4,f5,f6,f7,f8)
            + (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
            + (b1,b2,b3,b4,b5,b6,b7,b8) (mod 3)

      = (1=>c1,2=>c1,3=>c1,4=>c1,5=>c1,6=>c1,7=>c1,8=>c1)^(-1)·(f1,f2,f3,f4,f5,f6,f7,f8)
      + (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
      + (b1,b2,b3,b4,b5,b6,b7,b8)

      = (c1=>1,c1=>2,c1=>3,c1=>4,c1=>5,c1=>6,c1=>7,c1=>8)·(f1,f2,f3,f4,f5,f6,f7,f8)
      + (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
      + (b1,b2,b3,b4,b5,b6,b7,b8)

      }
a(bc):{
      permute: (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)
      * (a1=>e1,a2=>e2,a3=>e3,a4=>e4,a5=>e5,a6=>e6,a7=>e7,a8=>e8)
      = (1=>e1,2=>e1,3=>e1,4=>e1,5=>e1,6=>e1,7=>e1,8=>e1)
      orient : (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·
      ((a1=>c1,a2=>c2,a3=>c3,a4=>c4,a5=>c5,a6=>c6,a7=>c7,a8=>c8)^(-1)·(f1,f2,f3,f4,f5,f6,f7,f8) + (d1,d2,d3,d4,d5,d6,d7,d8))
      + (b1,b2,b3,b4,b5,b6,b7,b8) (mod 3)

      这步是错的：

      = (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·((a1=>c1,a2=>c2,a3=>c3,a4=>c4,a5=>c5,a6=>c6,a7=>c7,a8=>c8)^(-1)·(f1,f2,f3,f4,f5,f6,f7,f8))
      + (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
      + (b1,b2,b3,b4,b5,b6,b7,b8)

      = (a1=>1,a1=>2,a1=>3,a1=>4,a1=>5,a1=>6,a1=>7,a1=>8)·((c1=>a1,c2=>a2,c3=>a3,c4=>a4,c5=>a5,c6=>a6,c7=>a7,c8=>a8)·(f1,f2,f3,f4,f5,f6,f7,f8))
      + (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
      + (b1,b2,b3,b4,b5,b6,b7,b8)

      = (c1=>1,c1=>2,c1=>3,c1=>4,c1=>5,c1=>6,c1=>7,c1=>8)·(f1,f2,f3,f4,f5,f6,f7,f8))
      + (1=>a1,2=>a1,3=>a1,4=>a1,5=>a1,6=>a1,7=>a1,8=>a1)^(-1)·(d1,d2,d3,d4,d5,d6,d7,d8)
      + (b1,b2,b3,b4,b5,b6,b7,b8)
      }



orient := (a1.orient ∘ a2.permute.invFun) + a2.orient -- ∘是右边的函数作用到左边的对象

For example :
a is F, b is R, c is B
a: {
permute: Perm (Fin 8) := (1=>2,2=>6,3,4,5=>1,6=>5,7,8)
orient : Vector (Fin 3) 8 := (2,1,0,0,1,2,0,0)
}
b: {
permute: Perm (Fin 8) := (1,2=>3,3=>7,4,5,6=>2,7=>6,8)
orient : Vector (Fin 3) 8 := (0,2,1,0,0,1,2,0)
}
c: {
permute: Perm (Fin 8) := (1,2,3=>4,4=>8,5,6,7=>3,8=>7)
orient : Vector (Fin 3) 8 := (0,0,2,1,0,0,1,2)
}
ab: {
permute: (1=>2,2=>6,3,4,5=>1,6=>5,7,8) * (1,2=>3,3=>7,4,5,6=>2,7=>6,8)
      = (1=>3,2,3=>7,4,5=>1,6=>5,7=>6,8)
orient: (1,2=>3,3=>7,4,5,6=>2,7=>6,8)^(-1)·(2,1,0,0,1,2,0,0) + (0,2,1,0,0,1,2,0)
      = (1,3=>2,7=>3,4,5,2=>6,6=>7,8)·(2,1,0,0,1,2,0,0) + (0,2,1,0,0,1,2,0)
      = (2,0,0,0,1,1,2,0)
      + (0,2,1,0,0,1,2,0)
      = (2,2,1,0,1,2,1,0)
}
bc:{
permute: (1,2=>3,3=>7,4,5,6=>2,7=>6,8) * (1,2,3=>4,4=>8,5,6,7=>3,8=>7)
      = (1,2=>4,3,4=>8,5,6=>2,7=>6,8=>7)
orient : (1,2,3=>4,4=>8,5,6,7=>3,8=>7)^(-1)·(0,2,1,0,0,1,2,0) + (0,0,2,1,0,0,1,2)
      = (1,2,4=>3,8=>4,5,6,3=>7,7=>8)·(0,2,1,0,0,1,2,0) + (0,0,2,1,0,0,1,2)
      = (0,2,0,0,0,1,1,2)
      + (0,0,2,1,0,0,1,2)
      = (0,2,2,1,0,1,2,1)
}
(ab)c:{
permute: (1=>3,2,3=>7,4,5=>1,6=>5,7=>6,8) * (1,2,3=>4,4=>8,5,6,7=>3,8=>7)
      = (1=>4,2,3,4=>8,5=>1,6=>5,7=>6,8=>7)
orient : (1,2,3=>4,4=>8,5,6,7=>3,8=>7)^(-1)·(2,2,1,0,1,2,1,0) + (0,0,2,1,0,0,1,2)
      = (2,2,1,1,1,2,0,0)
      + (0,0,2,1,0,0,1,2)
      = (2,2,0,2,1,2,1,2)
}
a(bc):{
permute: (1=>2,2=>6,3,4,5=>1,6=>5,7,8) * (1,2=>4,3,4=>8,5,6=>2,7=>6,8=>7)
      = (1=>4,2,3,4=>8,5=>1,6=>5,7=>6,8=>7)
orient : (1,2=>4,3,4=>8,5,6=>2,7=>6,8=>7)^(-1)·(2,1,0,0,1,2,0,0) + (0,2,2,1,0,1,2,1)
      = (2,2,0,1,1,0,0,0)
      + (0,2,2,1,0,1,2,1)
      = (2,1,2,2,1,1,2,1)
}
